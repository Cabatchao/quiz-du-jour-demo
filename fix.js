var SM={home:'homeScreen','home-screen':'homeScreen',quiz:'quizScreen','quiz-screen':'quizScreen',results:'resultsScreen','results-screen':'resultsScreen',leaderboard:'leaderboardScreen','leaderboard-screen':'leaderboardScreen',shop:'shopScreen','shop-screen':'shopScreen',profile:'profileScreen','profile-screen':'profileScreen',draw:'drawScreen','draw-screen':'drawScreen','auth-screen':'__auth__'};
function showScreen(id){var m=SM[id]||id;if(m==='__auth__'){var l=document.getElementById('loginModal');if(l){l.style.display='flex';l.classList.remove('hidden');}document.querySelectorAll('.screen').forEach(function(s){s.classList.remove('active');});return;}document.querySelectorAll('.screen').forEach(function(s){s.classList.remove('active');});var t=document.getElementById(m);if(t)t.classList.add('active');}
function toggleMobileMenu(){var m=document.getElementById('mobileMenu');if(m)m.classList.toggle('open');}
function handleDemoLogin(){var i=document.getElementById('loginUsername');if(!i)return;var u=i.value.trim();if(!u||u.length<3){alert('Pseudo: 3 caracteres minimum');return;}var uid='user_'+Date.now();localStorage.setItem('currentUser',JSON.stringify({id:uid,username:u}));localStorage.setItem('playerProfile',JSON.stringify({id:uid,pseudo:u,email:'demo@quizdujour.fr',total_score:0,created_at:new Date().toISOString()}));var m=document.getElementById('loginModal');if(m){m.style.display='none';}var a=document.getElementById('auth-modal');if(a)a.remove();var ui=document.getElementById('userInfo');if(ui)ui.style.display='flex';var un=document.getElementById('userName');if(un)un.textContent=u;var ua=document.getElementById('userAvatar');if(ua)ua.textContent=u.charAt(0).toUpperCase();showScreen('home');}
document.addEventListener('DOMContentLoaded',function(){try{var su=JSON.parse(localStorage.getItem('currentUser'));var sp=JSON.parse(localStorage.getItem('playerProfile'));if(su&&sp){var m=document.getElementById('loginModal');if(m)m.style.display='none';var ui=document.getElementById('userInfo');if(ui)ui.style.display='flex';var un=document.getElementById('userName');if(un)un.textContent=su.username;var ua=document.getElementById('userAvatar');if(ua)ua.textContent=su.username.charAt(0).toUpperCase();showScreen('home');}else{document.querySelectorAll('.screen').forEach(function(s){s.classList.remove('active');});}}catch(e){console.error(e);}});